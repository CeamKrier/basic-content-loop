"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([[636],{5636:function(e,n,t){t.r(n),t.d(n,{default:function(){return D}});var a=t(8844),s=t(4951),r=t(1017),i=t(2309),c=t(8),o=t(2292),l=t(9332),u=t(822),d=t(7155),v=t(4706),p=t(3247),m=t(1595),f=t(3745),h=function(e){var n=e.children,t=(0,o.useState)(!1),a=(0,c.Z)(t,2),s=a[0],r=a[1];return(0,f.jsxs)("div",{className:"modal-wrapper ".concat(s?"":"closed"),children:[(0,f.jsx)("div",{className:"modal-toggler",onClick:function(){r(!s)},children:s?(0,f.jsx)(p.Z,{}):(0,f.jsx)(m.Z,{})}),(0,f.jsx)("div",{className:"modal",children:n})]})},x=function(e){var n,t=e.contentURL,a=e.contentType,s=e.visible;return t&&a?("video"===a?n=(0,f.jsx)("div",{className:"full-cover-video",children:(0,f.jsx)("video",{src:t,autoPlay:!0,muted:!0,loop:!0})}):"image"===a&&(n=(0,f.jsx)("div",{className:"full-cover-image",style:{backgroundImage:"url(".concat(t,")")}})),(0,f.jsx)("div",{className:"full-cover".concat(s?"":"-hidden"),children:n})):(0,f.jsx)(f.Fragment,{})},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(n){setTimeout((function(){n(!0)}),1e3*e)}))},y=function(e){var n=e.playlist,t=(0,o.useState)(-1),s=(0,c.Z)(t,2),i=s[0],l=s[1],u=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null===n||void 0===n?void 0:n[i],e.next=3,j(null===t||void 0===t?void 0:t.duration);case 3:l(i+1<(null===n||void 0===n?void 0:n.length)?i+1:0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){u()}),[i]),(0,f.jsx)(f.Fragment,{children:n.map((function(e,n){return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(x,{contentType:null===e||void 0===e?void 0:e.type,contentURL:null===e||void 0===e?void 0:e.url,visible:n===i},e.url)})}))})},Z=y,g=t(3228),N=t(8197),w=function(e){var n=e.status,t=e.message,a=200===n,s=a?"Content successfully added":t,r=(0,o.useState)(!1),i=(0,c.Z)(r,2),l=i[0],u=i[1];return(0,o.useEffect)((function(){u(!(!n||!t))}),[n,t]),l?(0,f.jsxs)("div",{className:"notification",children:[a?(0,f.jsx)(g.Z,{className:"icon icon-success"}):(0,f.jsx)(N.Z,{className:"icon icon-error"}),s]}):(0,f.jsx)(f.Fragment,{})},b=t(6970),C=l.Z.Option,k=[{name:"A piano image",type:"image",url:"https://images.rawpixel.com/image_1000/czNmcy1wcml2YXRlL3Jhd3BpeGVsX2ltYWdlcy93ZWJzaXRlX2NvbnRlbnQvbHIvcHg4NDMxMzUtaW1hZ2Uta3d2eGdwdjEuanBn.jpg",duration:3},{name:"A piano video",type:"video",url:"https://v3.cdnpk.net/videvo_files/video/free/video0475/large_watermarked/_import_61ff563b7ac975.89975859_preview.mp4",duration:5}];var D=function(){var e=(0,o.useState)(k),n=(0,c.Z)(e,2),t=n[0],p=n[1],m=(0,o.useReducer)((function(e,n){switch(n.type){case"contentName":return(0,i.Z)((0,i.Z)({},e),{},{contentName:n.value});case"contentUrl":return(0,i.Z)((0,i.Z)({},e),{},{contentUrl:n.value});case"contentDisplayDuration":return(0,i.Z)((0,i.Z)({},e),{},{contentDisplayDuration:n.value});case"contentType":return(0,i.Z)((0,i.Z)({},e),{},{contentType:n.value});default:return e}}),{}),x=(0,c.Z)(m,2),j=x[0],y=x[1],g=(0,o.useState)(),N=(0,c.Z)(g,2),D=N[0],T=N[1],U=(0,o.useMemo)((function(){return!j.contentName||!j.contentUrl||!j.contentDisplayDuration||!j.contentType}),[j]);(0,o.useEffect)((function(){setTimeout((function(){T(void 0)}),4e3)}),[D]);var E=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={name:j.contentName,url:j.contentUrl,duration:j.contentDisplayDuration,type:j.contentType},e.prev=1,!t.some((function(e){return e.url===n.url}))){e.next=5;break}return T({status:400,data:"This content already exist on playlist"}),e.abrupt("return");case 5:p([].concat((0,s.Z)(t),[n])),T({status:200,data:"Content added successfully"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),T(null===e.t0||void 0===e.t0?void 0:e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return t?(0,f.jsxs)("div",{children:[(0,f.jsx)(Z,{playlist:t}),(0,f.jsxs)(h,{children:[(0,f.jsx)("h3",{className:"modal-title",children:"Add Content"}),(0,f.jsxs)("div",{className:"modal-row",children:[(0,f.jsx)("span",{className:"title",children:"Content Name"}),(0,f.jsx)(u.Z,{placeholder:"Enter name",onChange:function(e){y({type:"contentName",value:e.target.value})}})]}),(0,f.jsxs)("div",{className:"modal-row",children:[(0,f.jsx)("span",{className:"title",children:"Content Address"}),(0,f.jsx)(u.Z,{placeholder:"Enter URL",onChange:function(e){y({type:"contentUrl",value:e.target.value})}})]}),(0,f.jsxs)("div",{className:"modal-row",children:[(0,f.jsx)("span",{className:"title",children:"Content Type"}),(0,f.jsxs)(l.Z,{placeholder:"Select type",optionFilterProp:"children",onChange:function(e){y({type:"contentType",value:e})},children:[(0,f.jsx)(C,{value:"video",children:"Video"}),(0,f.jsx)(C,{value:"image",children:"Image"})]})]}),(0,f.jsxs)("div",{className:"modal-row",children:[(0,f.jsx)("span",{className:"title",children:"Display Duration"}),(0,f.jsx)(d.Z,{placeholder:"Enter duration (seconds)",min:1,onChange:function(e){y({type:"contentDisplayDuration",value:e})}})]}),(0,f.jsx)("div",{className:"modal-row",children:(0,f.jsx)(v.Z,{type:"primary",onClick:E,disabled:U,children:"Submit"})})]}),(0,f.jsx)(w,{status:null===D||void 0===D?void 0:D.status,message:null===D||void 0===D?void 0:D.data})]}):(0,f.jsx)(b.Z,{})}}}]);
//# sourceMappingURL=636.dc8694cb.chunk.js.map